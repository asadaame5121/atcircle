# Webring (AT-Circle) プロジェクトロードマップ

このドキュメントは、MVP（Minimum Viable
Product）リリース後に取り組むべき将来の機能、アイデア、および技術的負債を追跡するためのものです。

## 完了した・安定した機能 (Done / Stable)

- [x] **ATProto / Bluesky 連携**:
  - [x] OAuthによるログインとプロフィール情報の取得.
  - [x] デプロイ環境（Fly.io）でのOAuthセッションの安定化（`PUBLIC_URL` 対応）。
  - [x] Lexicon の実装。
- [x] **ランタイムとデータベースの更新**:
  - [x] **Node.js 24** へのアップデート完了。
  - [x] `node:sqlite` (組み込みモジュール) への移行。
- [x] **RSS自動検出とアンテナ機能**:
  - [x] `HTMLRewriter` を使用したRSS自動検出。
  - [x] Cron による RSS フィードの自動定期収集。
  - [x] リングごとのフィルタリングが可能な集約タイムライン（アンテナ）。
  - [x] OPML エクスポート機能。
- [x] **ウィジェット機能**:
  - [x] ダークモード対応、カラーテーマ、プレビュー、コード生成（ウィジェットビルダー）。
  - [x] PDSへのバナー画像アップロードと表示機能。
  - [x] シンプルレイアウト、外部CSS、カスタムラベル対応。
- [x] **UXの洗練と国際化**:
  - [x] Webring作成時の自サイト自動登録。
  - [x] 「自分のサイトで参加」ボタンによる入力補助。
  - [x] **国際化 (i18n)**: 日本語・英語の切り替え対応。
  - [x] ダッシュボードの統合（所有/参加リングの一覧管理）。
- [x] **インフラ・開発環境**:
  - [x] Fly.io へのデプロイ（SQLite + Persistent Storage）。
  - [x] Playwright による E2E テスト環境の導入。
  - [x] **招待機能**: リングへの招待リンク生成機能。
  - [x] **登録URLの検証**:
  - ウィジェットが正しく設置されているかの自動チェック。
  - ナビゲーションウィジェットが貼れないサイト（SNS等）の扱い（メンバーとしては認めるが遷移先からは除外するなど）。
- [x] **利用規約・プライバシーポリシーの整備**:
  - OAuthで要求する権限や、取得・利用するデータの内容を明文化し、ユーザーに提示する。

  ### **1. ウェブリング仕様の具体化とLexicon拡張**

ATProtoの特性を活かした分散型の管理・インタラクションを実現するための仕様拡張。

- [x] **加入リクエスト (Join Requests)**:
  - ユーザーがリングへの参加を「意志表明」するレコード（`net.asadaame5121.at-circle.request`）を自身のPDSに作成。
  - リングオーナーは自身のAppView等を通じてこれらを検知し、承認・拒否を操作する。
- [x] **オーナー権限の明示と管理 (Ownership & Admins)**:
  - `ring` レコードに `admins: string[]` (DIDの配列)
    を追加し、誰が管理権限を持つかを明示。
  - オーナー（作成者）脱退時の継承プロセスの設計。
- [x] **ブロック・モデレーション機能**:
  - 不適切なサイトやユーザーをリングから除外・ブロックする Lexicon の定義。

## バックログ (Backlog) High Priority



### **2. データ永続化の高度化**

- [ ] **ATProto データの分散保存**:
  - 現在ローカルDBに保存しているデータの一部を PDS
    へ完全移行し、ポータビリティを高める。

## バックログ (Backlog) Low Priority

- [ ] **Webmention を利用した相互引用通知**:
      サイト間でのインタラクションの可視化。
      実質何も考えてない。ただ個人サイトにWebmentionを使ってるから愛着があるだけ。
- [ ] **ユーザープロフィールの動的同期**:
      Bluesky側のプロフィール変更を定期的に反映。
- [ ] **indieauthの対応**:
      

## 技術的負債・改善 (Technical Debt / Improvements)

- [ ] **セッション管理の強化**: KVバックエンド等による厳密な制御の検討。
